<!DOCTYPE html>
<html>
  <head>
    <title>Easter Egg - Prime Systems</title>
    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <!-- site css -->
    <link rel="stylesheet" href="build/site.min.css">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800,700,400italic,600italic,700italic,800italic,300italic" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="./build/site.min.js"></script>
  </head>
  <body>
    <div id="app" style="min-height: 50px; min-width: 70px;" onclick="getAll();"></div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>console.log("easter egg, good job chad");</script>
    <script>
      var appContainer = document.getElementById('app');
      function getAll() {
        axios.get('http://54.218.222.109:3030/products')
          .then(function (res) {
            if (typeof(Storage) !== "undefined") {
              console.log("Use the local storage");
              localStorage.setItem("products", JSON.stringify(res.data.data));
            } else {
              console.log("This browser needs updating");
            }
            console.log(localStorage);
          })
          .catch(function (err) {
            console.log(err);
          });
      }

      function getProduct(id) {
        axios.get('http://54.218.222.109:3030/products/' + id)
          .then(function (res) {
            console.log(res);
          })
          .catch(function (err) {
            console.log(err);
          });
      }

      function getIn(category, callback) {
        var results = [];
        if (localStorage.products) {
          var temp = JSON.parse(localStorage.products);
          temp.forEach(function (e) {
            if (e.category == category) {results.push(e);}
            console.log(results);
          });
        } else {
          getAll(getIn(category));
        }
      }

      function setProduct(product) {
        var temp = components.product;
        appContainer.innerHTML = temp;
        document.getElementById('product-name').innerHTML = product.name;
        document.getElementById('product-price').innerHTML = product.price;
        document.getElementById('product-slug').innerHTML = product.slug;
        document.getElementById('product-description').innerHTML = product.category;
      }
    </script>
  </body>
</html>
